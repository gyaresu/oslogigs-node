$("#venues").live("pageshow",function(){$("#listview").hasClass("loaded")||($.parse.init({app_id:"9vbpyfY5iHZqFmq4Fjh2mbUeCAs9vXLjfnIgmUm5",rest_key:"ptYuPEQ4l6mugCYtu2uRHi5X4S0taWNc4Tdd61rC"}),$.parse.get("Pub",{limit:1E3},function(c){var i="",g;$.each(c.results,function(c,d){g=99===d.beer_price?"?":d.beer_price;i+="<li>"+d.pub_name+": \u00f8l pris "+g+" kr.</li>"});$("#listview").append(i).listview("refresh");$("#listview").addClass("loaded")}))});$(".page-map").live("pageshow",function(){$.parse.init({app_id:"9vbpyfY5iHZqFmq4Fjh2mbUeCAs9vXLjfnIgmUm5",rest_key:"ptYuPEQ4l6mugCYtu2uRHi5X4S0taWNc4Tdd61rC"});$.parse.get("Pub",{limit:1E3},function(c){var i=new google.maps.LatLng(59.92,10.75),g=new google.maps.Map(document.getElementById("map-canvas"),{zoom:12,center:i,backgroundColor:"black",mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},mapTypeId:google.maps.MapTypeId.HYBRID}),h=new google.maps.InfoWindow;$.each(c.results,
function(c,a){var l,j=encodeURI(a.pub_address),k=encodeURI(a.pub_name),b=new google.maps.LatLng(a.lat,a.lng),b=new google.maps.Marker({animation:!0===a.pub_bounce?google.maps.Animation.BOUNCE:null,map:g,icon:"images/"+a.beer_price+".png",shadow:"images/shadow.png",position:b,title:a.pub_name});99===a.beer_price?b.setZIndex(1):b.setZIndex(100);google.maps.event.addListener(b,"click",function(){l=99===a.beer_price?"?":a.beer_price;tweet='<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://oslogigs.com" data-text="'+
a.pub_name+" "+a.beer_price+' kr." data-lang="en" data-via="OsloGigs" data-hashtags="oslo, oslogigs, norway">Tweet</a>';content_string="<h1>"+a.pub_name+'</h1><p><a href="http://maps.google.com/?saddr=Current%20Location&daddr='+j+"+("+k+')&dirflg=w&t=h">Google Maps Directions</a></p><p>Phone:<a href="tel:'+a.pub_phone+'">'+a.pub_phone+"</a></p><p>Halvliterpris: NOK <b>"+l+"</b></p><p>"+tweet+"</p>";h.setContent(content_string);h.open(g,this);twttr.widgets.load()})})})});(function(c){function i(a,j,k){c.error("$."+g+" :"+j+" "+k)}var g,h,d,a;g="parse";h={base:"https://api.parse.com/1/"};d={};a=/(users|login|files|push|requestPasswordReset)/;d.init=function(a){c.extend(h,"object"===typeof a?a:{},!0);return c[g]};c.each(["GET","POST","PUT","DELETE"],function(l,j){var k=j.toLowerCase();d[k]=function(){var b,f,e,d;b=arguments;f=b[0];e=b[1];d=b[2];error=b[3];"function"===typeof b[1]&&(e=!1,d=b[1],error=b[2]);b=["$.",g,".",k,"(",'"',f,'"'];e&&b.push(", "+(JSON?JSON.stringify(e):
"data"));b=b.join("")+");";c.publish&&c.publish("parse.log",[b]);h.app_id&&h.rest_key?b=!0:(b="Missing app_id, or rest_key authentication parameters.\nPass these credentials to $."+g+".init\napp_id = Application Id\nrest_key = REST API Key",alert(b),c.error(b),b=!1);b?(f={contentType:"application/json",processData:!1,dataType:"json",url:h.base+(a.test(f)?f:"classes/"+f),type:j,headers:{"X-Parse-Application-Id":h.app_id,"X-Parse-REST-API-Key":h.rest_key}},"object"===typeof e&&("GET"===j?(f.processData=
!0,e.where&&"object"===typeof e.where&&(e.where=JSON.stringify(e.where))):e=JSON.stringify(e),f.data=e),e=c.ajax(f)):e=!1;f=error;"function"===typeof d&&e.done(d);f="function"===typeof f?f:i;e.fail(f);return c[g]}});c.extend(d,{signup:function(a,c,d){return this.post("users",a,c,d)},login:function(a,c,d,b){return this.get("login",{username:a,password:c},d,b)},requestPasswordReset:function(a,c,d){return this.post("requestPasswordReset",{email:a},c,d)}});c[g]=d})(jQuery);
